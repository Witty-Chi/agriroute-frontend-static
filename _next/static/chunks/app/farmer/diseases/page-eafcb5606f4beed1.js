(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[686],{6562:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(5155),r=s(2115);function n(){var e;let[t,s]=(0,r.useState)(null),[n,l]=(0,r.useState)(""),[i,o]=(0,r.useState)(null),c=async e=>{if(e.preventDefault(),!t)return;let s=new FormData;s.append("image",t);try{let e=await fetch("https://agriroute-backend.onrender.com/api/detect_disease/",{method:"POST",body:s}),t=await e.json();o(t)}catch(e){console.error("Error uploading image:",e)}},d=async()=>{let e=await fetch("https://agriroute-backend.onrender.com/api/download-diagnosis-pdf/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({predictions:i.predictions})}),t=await e.blob(),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.setAttribute("download","crop_diagnosis_report.pdf"),document.body.appendChild(a),a.click(),a.remove()};return(0,a.jsxs)("div",{className:"min-h-screen p-6 bg-gradient-to-br from-green-50 to-blue-50",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-green-800 mb-4",children:"Crop Disease Detection"}),(0,a.jsxs)("form",{onSubmit:c,className:"space-y-4 mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Upload Crop Image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];a&&(s(a),l(URL.createObjectURL(a)))},required:!0,className:"block text-sm text-gray-900 bg-white border border-gray-300 rounded cursor-pointer focus:outline-none"}),(0,a.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Detect Disease"})]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[n&&(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-green-700 mb-2",children:"Preview"}),(0,a.jsx)("img",{src:n,alt:"Preview",className:"w-full max-w-sm rounded border"})]}),i&&(0,a.jsxs)("div",{className:"flex-1 bg-white p-4 rounded shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-green-700 mb-2",children:"Diagnosis Result"}),null==(e=i.predictions)?void 0:e.map((e,t)=>(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("p",{className:"text-gray-900",children:[e.name," (",e.confidence,"%)"]}),(0,a.jsxs)("p",{className:"text-gray-900",children:[(0,a.jsx)("strong",{children:"Cause:"})," ",e.cause]}),(0,a.jsxs)("p",{className:"text-gray-900",children:[(0,a.jsx)("strong",{children:"Treatment:"})," ",e.treatment]})]},t)),(0,a.jsx)("button",{onClick:d,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 mt-4",children:"Download PDF Report"})]})]})]})}},9105:(e,t,s)=>{Promise.resolve().then(s.bind(s,6562))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(9105)),_N_E=e.O()}]);
